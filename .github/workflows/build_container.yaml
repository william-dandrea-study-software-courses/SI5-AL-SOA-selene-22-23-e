name: "Build Docker containers"

on: [push, pull_request]

jobs:
  build-gateway-container:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Build the Production Gateway Container
        run: docker build --target production -f gateway/Dockerfile -t "gateway" .

  build-life-support-service-container:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Build the Production life-support-service Container
        run: docker build --target production -f life-support-service/Dockerfile -t "life-support-service" .

  build-module-life-service-container:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Build the Production module-life-service Container
        run: docker build --target production -f module-life-service/Dockerfile -t "life-support-service" .

  build-needs-control-service-container:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Build the Production needs-control-service Container
        run: docker build --target production -f needs-control-service/Dockerfile -t "life-support-service" .

  build-resupply-service-container:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Build the Production resupply-service Container
        run: docker build --target production -f resupply-service/Dockerfile -t "life-support-service" .
