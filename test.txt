===> Awaiting all services ready
gateway service is up and running at http://localhost:9500
===> Launch docker container running python integration script
------------------------------------------------------------------------------------------

=> Peuplement de la base de données Astronaut

Ajout de 10 astronautes
POST http://localhost:4311/astronaut
{"id_astronaut":1,"name":"Megan","isDead":false,"job":"Astronaute","planet":"Terre","location":"Zone d'embarquement","_id":"6355600f660f2959a7bbe480"}
{"id_astronaut":2,"name":"Thomas","isDead":false,"job":"Astronaute","planet":"Terre","location":"Zone d'embarquement","_id":"6355600f660f2959a7bbe483"}
{"id_astronaut":3,"name":"Samantha","isDead":false,"job":"Astronaute","planet":"Terre","location":"Zone d'embarquement","_id":"6355600f660f2959a7bbe486"}
{"id_astronaut":4,"name":"Oleg","isDead":false,"job":"Astronaute","planet":"Terre","location":"Zone d'embarquement","_id":"6355600f660f2959a7bbe489"}
{"id_astronaut":5,"name":"Peggy","isDead":false,"job":"Astronaute","planet":"Terre","location":"Zone d'embarquement","_id":"6355600f660f2959a7bbe48c"}
{"id_astronaut":6,"name":"Buzz","isDead":false,"job":"Commandant de Moon Base","planet":"Lune","location":"Module de commandement de la base","_id":"6355600f660f2959a7bbe48f"}
{"id_astronaut":7,"name":"Ellen","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules de vie Nord","_id":"6355600f660f2959a7bbe492"}
{"id_astronaut":8,"name":"Jim","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules d'analyse scientifique","_id":"6355600f660f2959a7bbe495"}
{"id_astronaut":9,"name":"Kayla","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules de vie Nord","_id":"6355600f660f2959a7bbe498"}
{"id_astronaut":10,"name":"Akihiko","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules d'analyse scientifique","_id":"6355600f660f2959a7bbe49b"}
{"id_astronaut":11,"name":"Serguei","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules de vie Nord","_id":"6355600f660f2959a7bbe49e"}

=> Peuplement de la base de données Module Life

Ajout de 4 modules
  - Inventaire de 32 provisions
  - Modules isolés : 1 (514) 
  - Modules en mauvaise situation : 2
  - Besoins de 8 provisions

POST http://localhost:4303/module
{"id_module":512,"type":"Module sécurisé","vitals":[{"co2_rate":100,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c23"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c24"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c25"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c26"}],"astronauts":[6],"isolated":false,"_id":"6355601066b3278a49180c22"}
{"id_module":513,"type":"Module de vie","vitals":[{"co2_rate":80,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c2a"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c2b"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c2c"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c2d"}],"astronauts":[7,9,11],"isolated":false,"_id":"6355601066b3278a49180c29"}
{"id_module":514,"type":"Module d'analyse scientifique","vitals":[{"co2_rate":20,"co2_scrubbers_activated":false,"_id":"6355601066b3278a49180c31"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c32"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c33"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c34"}],"astronauts":[8,10],"isolated":true,"_id":"6355601066b3278a49180c30"}
{"id_module":515,"type":"Entrepot","vitals":[{"co2_rate":75,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c38"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c39"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c3a"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c3b"}],"astronauts":[],"isolated":false,"_id":"6355601066b3278a49180c37"}

=> Peuplement de la base de données Spacesuit

Ajout d'une combinaison numéro 1 avec:
  - 20 de temperature
  - 3 de pression 
  - 80 de taux d'oxygene
  - 60 de rythme cardiaque

POST http://localhost:4306/module
{"id_spacesuit":1,"cardiac_rythm":60,"o2_rate":80,"temperature":20,"pressure":3,"power":100,"_id":"63556010233bb3f9d1effd4e"}

=> Peuplement de la base de données Spacecraft

Ajout de 2 vaisseaux 2 avec:
  - des bonnes conditions matérielles 
  - status à PREPARING
  - aucune mission de ravitaillement lié

POST http://localhost:4305/spacecraft
{"id_spacecraft":1,"vitals":true,"status":"Au sol","id_resupplyMission":"None","id_rotationMissions":[],"_id":"63556010f68608cf15ea87d8"}
{"id_spacecraft":2,"vitals":true,"status":"Au sol","id_resupplyMission":"None","id_rotationMissions":[],"_id":"63556010f68608cf15ea87db"}

=> Peuplement de la base de données Moon Base

Ajout d'une base lunaire 1 
POST http://localhost:4310/moon-base
{"id_base":1,"stock":[{"label":"saucisson","quantity":30,"_id":"635560107c5080be5c7a3e63"},{"label":"pates","quantity":80,"_id":"635560107c5080be5c7a3e64"},{"label":"eau","quantity":100,"_id":"635560107c5080be5c7a3e65"}],"alarm_on":false,"modules":[512,513,514,515]}

=> Peuplement de la base de données Meteorite Monitoring

Ajout de 5 meteorites inoffensives
POST http://localhost:4308/meteorite
{"id_meteorite":1,"dangerous":false,"_id":"6355601070274f0f68b740be"}
{"id_meteorite":2,"dangerous":false,"_id":"6355601070274f0f68b740c0"}
{"id_meteorite":3,"dangerous":false,"_id":"6355601070274f0f68b740c2"}
{"id_meteorite":4,"dangerous":false,"_id":"6355601070274f0f68b740c4"}
{"id_meteorite":5,"dangerous":false,"_id":"6355601070274f0f68b740c6"}

--------------------------------- Start Integration Tests --------------------------------


---------------------- Scenario 1 ----------------------

---------------------- US 1 ----------------------

=> Récupérer l'état individuel des modules via Survival Control Service
   En tant que Deke, je veux controler l'état des conditions de vie de chaque module
   On s'attend à recevoir les 4 modules avec leur vitals
GET http://localhost:4304/survival-control/supervision/
Response : 
[{"id_module":512,"vitals":[{"co2_rate":100,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c23"}]},{"id_module":513,"vitals":[{"co2_rate":80,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c2a"}]},{"id_module":514,"vitals":[{"co2_rate":20,"co2_scrubbers_activated":false,"_id":"6355601066b3278a49180c31"}]},{"id_module":515,"vitals":[{"co2_rate":75,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c38"}]}]

=> Récupération des données d'un module lunaire via Survival Control Service
   On veut s'assurer qu'un seul module est isolé
   On s'attend à ce que le champ isolated du module 512 soit à false 
GET http://localhost:4303/module
Response : 
[{"astronauts":[6],"id_module":512,"type":"Module sécurisé","vitals":[{"co2_rate":100,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c23"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c24"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c25"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c26"}],"isolated":false},{"astronauts":[7,9,11],"id_module":513,"type":"Module de vie","vitals":[{"co2_rate":80,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c2a"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c2b"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c2c"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c2d"}],"isolated":false},{"astronauts":[8,10],"id_module":514,"type":"Module d'analyse scientifique","vitals":[{"co2_rate":20,"co2_scrubbers_activated":false,"_id":"6355601066b3278a49180c31"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c32"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c33"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c34"}],"isolated":true},{"astronauts":[],"id_module":515,"type":"Entrepot","vitals":[{"co2_rate":75,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c38"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c39"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c3a"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c3b"}],"isolated":false}]

---------------------- US 4 ----------------------

=> Isolement d'un module lunaire via Survival Control Service
   En tant que Deke, je veux isoler le module 512 aprés avoir controlé les vitals
PUT http://localhost:4304/supervision/:idModule/isolate
Response : 
Module isolé

=> Récupération des données d'un module lunaire via Survival Control Service
   On veut s'assurer que le module 512 a bien été isolé
   On s'attend à ce que le champ isolated du module 512 soit à true 
GET http://localhost:4303/module
Response : 
{"_id":"6355601066b3278a49180c22","id_module":512,"type":"Module sécurisé","vitals":[{"co2_rate":100,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c23"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c24"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c25"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c26"}],"astronauts":[6],"isolated":true}

---------------------- US 13 ----------------------

=> Récupération des données d'un module lunaire via Meteorite Monitoring Service
   En tant que Deke, je veux connaitre la position de chaque astronaute sur la Lune
   On s'attend à ce que réponse soit false en effet aucune météorite n'est classée comme dangereuse
GET http://localhost:4308/meteorite/danger
Response : 
false

---------------------- US 17 ----------------------

=> Récupération des positions des astronautes sur la lune via Astronaut Service
   On veut s'assurer que la base lunaire n'est pas menacée par des météorites
   On s'attend à ce que les astronautes de la lune soient dans différents secteurs
GET http://localhost:4311/onMoonAstronauts
Response : 
[{"_id":"6355600f660f2959a7bbe48f","id_astronaut":6,"name":"Buzz","isDead":false,"job":"Commandant de Moon Base","planet":"Lune","location":"Module de commandement de la base"},{"_id":"6355600f660f2959a7bbe492","id_astronaut":7,"name":"Ellen","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules de vie Nord"},{"_id":"6355600f660f2959a7bbe495","id_astronaut":8,"name":"Jim","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules d'analyse scientifique"},{"_id":"6355600f660f2959a7bbe498","id_astronaut":9,"name":"Kayla","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules de vie Nord"},{"_id":"6355600f660f2959a7bbe49b","id_astronaut":10,"name":"Akihiko","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules d'analyse scientifique"},{"_id":"6355600f660f2959a7bbe49e","id_astronaut":11,"name":"Serguei","isDead":false,"job":"Astronaute","planet":"Lune","location":"Modules de vie Nord"}]

---------------------- US 14 ----------------------

=> Ajout d'une nouvelle météorite dans Meteorite Monitoring Service
   Un scientifique à détecter une nouvelle météorite qu'il considère comme dangereuse
   On s'attend à ce que la base lunaire s'isole
POST http://localhost:4308/meteorite
Response : 
{"id_meteorite":6,"dangerous":true,"_id":"6355601070274f0f68b740c9"}
=> Petite attente pour récupérer l'event
=> Isolement de la base lunaire en cas de nuage de météorite
   En tant que Deke, je veux faire sonner l'alarme de la base lunaire et isoler tous les modules car j'ai détecté un danger
   On s'attend à ce que le champ alarm_on de la base soit à true, que tous les modules soient isolés et que la position de tous les astronautes de la lune soient dans le module sécurisé
GET http://localhost:4310/moon-base/1
Response : 
{"id_base":1,"stock":[{"label":"saucisson","quantity":30,"_id":"635560107c5080be5c7a3e63"},{"label":"pates","quantity":80,"_id":"635560107c5080be5c7a3e64"},{"label":"eau","quantity":100,"_id":"635560107c5080be5c7a3e65"}],"alarm_on":true,"modules":[512,513,514,515]}
GET http://localhost:4303/module
Response : 
[{"astronauts":[6,7,9,11,8,10],"id_module":512,"type":"Module sécurisé","vitals":[{"co2_rate":100,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c23"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c24"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c25"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c26"}],"isolated":true},{"astronauts":[],"id_module":513,"type":"Module de vie","vitals":[{"co2_rate":80,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c2a"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c2b"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c2c"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c2d"}],"isolated":true},{"astronauts":[],"id_module":514,"type":"Module d'analyse scientifique","vitals":[{"co2_rate":20,"co2_scrubbers_activated":false,"_id":"6355601066b3278a49180c31"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c32"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c33"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c34"}],"isolated":true},{"astronauts":[],"id_module":515,"type":"Entrepot","vitals":[{"co2_rate":75,"co2_scrubbers_activated":true,"_id":"6355601066b3278a49180c38"}],"supplies":[{"label":"saucisson","quantity":2,"_id":"6355601066b3278a49180c39"},{"label":"pates","quantity":5,"_id":"6355601066b3278a49180c3a"},{"label":"eau","quantity":7,"_id":"6355601066b3278a49180c3b"}],"isolated":true}]
GET http://localhost:4311/onMoonAstronauts
Response : 
[{"_id":"6355600f660f2959a7bbe48f","id_astronaut":6,"name":"Buzz","isDead":false,"job":"Commandant de Moon Base","planet":"Lune","location":"Module de commandement de la base"},{"_id":"6355600f660f2959a7bbe492","id_astronaut":7,"name":"Ellen","isDead":false,"job":"Astronaute","planet":"Lune","location":"Module sécurisé"},{"_id":"6355600f660f2959a7bbe495","id_astronaut":8,"name":"Jim","isDead":false,"job":"Astronaute","planet":"Lune","location":"Module sécurisé"},{"_id":"6355600f660f2959a7bbe498","id_astronaut":9,"name":"Kayla","isDead":false,"job":"Astronaute","planet":"Lune","location":"Module sécurisé"},{"_id":"6355600f660f2959a7bbe49b","id_astronaut":10,"name":"Akihiko","isDead":false,"job":"Astronaute","planet":"Lune","location":"Module sécurisé"},{"_id":"6355600f660f2959a7bbe49e","id_astronaut":11,"name":"Serguei","isDead":false,"job":"Astronaute","planet":"Lune","location":"Module sécurisé"}]

---------------------------------- End Integration Tests ---------------------------------
